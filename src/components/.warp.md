# Component Development Rules - EduDash Pro

## Component Architecture Standards

### Component Structure Guidelines
- Use functional components with TypeScript interfaces
- Export components as default exports with named interfaces
- Include comprehensive JSDoc documentation
- Use React.forwardRef for components requiring DOM access
- Implement React.memo for performance optimization when needed

### Naming Conventions
- **Components**: PascalCase (e.g., `StudentSubmissionCard`, `TeacherLessonBuilder`)
- **Props Interfaces**: ComponentName + "Props" (e.g., `StudentSubmissionCardProps`)
- **Files**: Match component name exactly (e.g., `StudentSubmissionCard.tsx`)
- **Role-based prefixes**: Use role context when needed (`AdminUserTable`, `ParentDashboardHeader`)

### Mobile-First Component Design
- **Touch Targets**: Minimum 44px for all interactive elements
- **Responsive Design**: Use TailwindCSS mobile-first breakpoints (`sm:`, `md:`, `lg:`)
- **Touch Gestures**: Implement swipe, pinch, and long-press where appropriate
- **Loading States**: Always show loading indicators for async operations
- **Error Boundaries**: Wrap complex components in error boundaries

### TailwindCSS Standards
- Use consistent spacing scale: `space-x-*`, `space-y-*`, `gap-*`
- Implement dark mode: Use `dark:` prefix consistently
- Mobile breakpoints: Start with base (mobile) then add `sm:`, `md:`, `lg:`
- Custom utilities: Define reusable patterns in `tailwind.config.js`

### Component Categories

#### 1. Layout Components
```typescript
// Header with mobile-first navigation
interface DashboardHeaderProps {
  userRole: 'super_admin' | 'principal' | 'teacher' | 'parent';
  schoolName?: string;
  onMenuToggle: () => void;
  notifications?: number;
}

// Responsive sidebar with role-based navigation
interface SidebarProps {
  isOpen: boolean;
  onClose: () => void;
  userRole: 'super_admin' | 'principal' | 'teacher' | 'parent';
  currentPath: string;
}
```

#### 2. Data Display Components
```typescript
// Multi-tenant aware data tables
interface DataTableProps<T> {
  data: T[];
  columns: ColumnDef<T>[];
  schoolId?: string; // For tenant-scoped data
  onRowClick?: (row: T) => void;
  mobileView?: 'cards' | 'list'; // Mobile-optimized views
  loading?: boolean;
  error?: string;
}

// Role-specific dashboard cards
interface DashboardCardProps {
  title: string;
  value: string | number;
  change?: number;
  icon: React.ComponentType<{ className?: string }>;
  trend?: 'up' | 'down' | 'neutral';
  loading?: boolean;
}
```

#### 3. Form Components
```typescript
// File upload with mobile camera support
interface MediaUploadProps {
  accept?: string[];
  multiple?: boolean;
  onUpload: (files: File[]) => Promise<void>;
  maxSize?: number; // in bytes
  schoolId: string; // For tenant-scoped uploads
  userId: string;
  supportCamera?: boolean; // Enable camera capture on mobile
  supportAudio?: boolean; // Enable audio recording
}

// Multi-step form wizard
interface FormWizardProps {
  steps: FormStep[];
  currentStep: number;
  onStepChange: (step: number) => void;
  onSubmit: (data: any) => Promise<void>;
  loading?: boolean;
  mobileOptimized?: boolean;
}
```

#### 4. AI-Powered Components
```typescript
// AI lesson generator interface
interface LessonGeneratorProps {
  onGenerate: (prompt: string, options: LessonOptions) => Promise<void>;
  onSave: (lesson: GeneratedLesson) => Promise<void>;
  schoolId: string;
  teacherId: string;
  loading?: boolean;
  remainingCredits?: number;
}

// AI grading assistant
interface GradingAssistantProps {
  submission: StudentSubmission;
  rubric?: GradingRubric;
  onGrade: (grade: AIGrade) => Promise<void>;
  onFeedback: (feedback: string) => Promise<void>;
  teacherId: string;
  schoolId: string;
}
```

#### 5. Interactive Elements
```typescript
// Touch-optimized button variants
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';
  size: 'sm' | 'md' | 'lg' | 'xl'; // xl for mobile touch targets
  loading?: boolean;
  disabled?: boolean;
  icon?: React.ComponentType<{ className?: string }>;
  fullWidth?: boolean; // Common for mobile layouts
  children: React.ReactNode;
  onClick?: () => void;
}

// Mobile-friendly modal/drawer
interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  size?: 'sm' | 'md' | 'lg' | 'full'; // full for mobile
  mobileAsDrawer?: boolean; // Convert to drawer on mobile
  children: React.ReactNode;
}
```

### Accessibility Requirements
- Include proper ARIA labels and roles
- Ensure keyboard navigation works properly
- Use semantic HTML elements (header, nav, main, section)
- Implement focus management for modals and forms
- Test with screen readers
- Provide alternative text for images and icons
- Use sufficient color contrast ratios

### Error Handling Patterns
```typescript
// Standard error boundary wrapper
interface ErrorBoundaryProps {
  fallback?: React.ComponentType<{ error: Error; retry: () => void }>;
  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;
  children: React.ReactNode;
}

// Loading state wrapper
interface LoadingWrapperProps {
  loading: boolean;
  error?: string;
  empty?: boolean;
  emptyMessage?: string;
  loadingComponent?: React.ComponentType;
  errorComponent?: React.ComponentType<{ error: string; retry?: () => void }>;
  children: React.ReactNode;
}
```

### Performance Optimization
- Use React.memo for expensive components
- Implement proper key props for list items
- Lazy load heavy components and images
- Debounce search inputs and API calls
- Use React.useCallback and useMemo appropriately
- Optimize images with next/image component

### Testing Guidelines
- Write unit tests for component logic
- Test mobile responsiveness at different breakpoints
- Test touch interactions and gestures
- Include accessibility testing
- Test with different user roles and permissions
- Mock API calls and external dependencies

### Component Template
```typescript
import React, { forwardRef, memo } from 'react';
import { cn } from '@/utils/cn';

interface ComponentNameProps {
  /** Component description */
  className?: string;
  /** Required prop description */
  requiredProp: string;
  /** Optional prop with default */
  optionalProp?: boolean;
  /** Callback function */
  onAction?: (data: any) => void;
}

/**
 * ComponentName - Brief description of what the component does
 * 
 * @param props - The component props
 * @returns JSX element
 */
const ComponentName = memo(forwardRef<HTMLDivElement, ComponentNameProps>(
  ({ className, requiredProp, optionalProp = false, onAction, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(
          // Base mobile-first styles
          "w-full p-4 bg-white dark:bg-gray-800",
          // Responsive enhancements
          "sm:p-6 md:p-8",
          // Custom className
          className
        )}
        {...props}
      >
        {/* Component content */}
      </div>
    );
  }
));

ComponentName.displayName = 'ComponentName';

export default ComponentName;
export type { ComponentNameProps };
```

Remember: Every component should work beautifully on mobile devices and scale up to desktop. Always test on real devices, not just browser dev tools.
